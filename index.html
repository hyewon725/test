<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>미팅플레이스공유</title>
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
  <div class="row text-center">
    <div class="col-12">
        <span>
            <span class="sociallink ml-1">
                <a href="javascript:sendLinkFacebook()" title="페이스북으로 공유">
                    <img src="/static/images/facebook.png" width=36 alt="Facebook">
                </a>
            </span>
            <span class="sociallink ml-1">
                <a href="javascript:sendLinkTwitter()" title="트위터로 공유">
                    <img src="/static/images/twitter.png" width=36 alt="Twitter">
                </a>
            </span>
            <span class="sociallink ml-1">
                <a href="javascript:sendLinkNaver()" title="네이버로 공유">
                    <img src="/static/images/naver.png" width=36 alt="Naver">
                </a>
            </span>
            <span class="sociallink ml-1">
                <a href="javascript:sendLinkKakao()" id="kakao-link-btn" title="카카오톡으로 공유">
                    <img src="https://developers.kakao.com/assets/img/about/logos/kakaolink/kakaolink_btn_medium.png" width=36 alt="Kakaotalk">
                </a>
            </span>
            <a href="javascript:shareStoryWeb()"><img src="https://developers.kakao.com/sdk/js/resources/story/icon_small.png" /></a>
    </div>
</div>
    <script>
// SNS 공유기능
function sendLinkFacebook(){
    var facebook_share_url = "https://www.facebook.com/sharer/sharer.php?u=https://hufscapstone.netlify.app/";
    window.open(facebook_share_url, 
                'Share on Facebook', 
                'scrollbars=no, width=500, height=500');    
    // return false;
    // FireFox에서는 anchor tag에 걸린 함수에 명시된 return 값이 있으면 그 값을 string 으로 화면에 띄우는 버그(? 인지 의도된 동작인지?) 발생.
    // 즉 return false; 해놓으면 Facebook 걸려있는 anchor tag 클릭했을때 새 창이 뜨고 원래 창에는 흰 화면에 false 라고 글자가 표시된다.
    // 이를 방지하기 위해서 return false; 는 지워주었음
}

function sendLinkTwitter(){
    var twitter_share_text="우리들의 미팅플레이스";
    var twitter_share_url="https://hufscapstone.netlify.app/";
    window.open("https://twitter.com/share?text="+twitter_share_text+"&url="+twitter_share_url,
                'Share on Twitter',
                'scrollbars=no, width=500, height=500');
}

function sendLinkNaver(){
    var raw_url = "https://hufscapstone.netlify.app/";
    var raw_title = "우리들의 미팅플레이스"
    var naver_root_url = "http://share.naver.com/web/shareView.nhn?url="
    var naver_share_url = naver_root_url+encodeURI(raw_url)+"&title="+encodeURI(raw_title);

    window.open(naver_share_url,
                'Share on Naver',
                'scrollbars=no, width=500, height=500');    
}

// https://developers.kakao.com/docs/js/kakaotalklink
Kakao.init('a65ce9b444e778d6e4524f99d1734dc0');
function sendLinkKakao(){
    Kakao.Link.sendDefault({
      objectType: 'feed',
      content: {
        title: '우리들의 미팅플레이스',
        description: '',
        imageUrl: 'https://us.123rf.com/450wm/yupiramos/yupiramos1712/yupiramos171220221/92272314-%ED%95%80-%ED%8F%AC%EC%9D%B8%ED%84%B0-%EC%9C%84%EC%B9%98-%EC%95%84%EC%9D%B4%EC%BD%98-%EB%B2%A1%ED%84%B0-%EC%9D%BC%EB%9F%AC%EC%8A%A4%ED%8A%B8-%EB%94%94%EC%9E%90%EC%9D%B8.jpg?ver=6',
        link: {
          mobileWebUrl: 'https://hufscapstone.netlify.app/',
          webUrl: 'https://hufscapstone.netlify.app/'
        }
      },
      buttons: [        
        {
          title: '링크 열기',
          link: {
            mobileWebUrl: 'https://hufscapstone.netlify.app/',
            webUrl: 'https://hufscapstone.netlify.app/'
          }
        }
      ]
    });

    function shareStoryWeb() { // 카카오 스토리 공유하기
          Kakao.Story.share({
            url: 'https://hufscapstone.netlify.app',
            text: '우리들의 미팅플레이스! #약속장소 :)',
          })
        }  
}
</script>
</body>
</html>
